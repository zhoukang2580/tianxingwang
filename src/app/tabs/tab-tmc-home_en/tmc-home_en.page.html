<ion-header>
    <ion-toolbar color='primary'>
        <ion-buttons slot='start' class="ion-margin-start" *ngIf='canShow'>
            <app-scan-comp></app-scan-comp>
        </ion-buttons>
        <ion-title class='ion-text-center' appShowtip>
            <ng-container *ngIf='(canSelectCompany)'>
                <ion-text *ngIf='(selectedCompany)'>{{selectedCompany}}</ion-text>
            </ng-container>
            <ion-text class="ion-margin-start">欢迎你
                <ng-container *ngIf='identity?.Name'>,<label notranslate>{{identity?.Name}}</label> </ng-container>
            </ion-text>
        </ion-title>
        <ion-buttons slot='end'>
            <ion-button fill='clear' size='small' (click)='onSwitchCustomer()' *ngIf='identity?.Numbers?.AgentId;else selectCompany'>
                <ion-chip color='success'>
                    <ion-label>切换客户</ion-label>
                </ion-chip>
            </ion-button>
        </ion-buttons>
        <ng-template #selectCompany>
            <ion-button fill='clear' size='small' (click)='onSwitchCompany()' *ngIf="(canSelectCompany)&&companies?.length>1">
                <ion-chip color='success'>
                    <ion-label>切换公司</ion-label>
                </ion-chip>
            </ion-button>
        </ng-template>
    </ion-toolbar>
</ion-header>
<ion-content>

    <div class="banners">
        <div class="swiper-container" #container>
            <div class="swiper-wrapper">
                <ng-container *ngIf='banners?.length else deftpl'>
                    <div class="swiper-slide" *ngFor='let pic of banners'>
                        <div class="inner">
                            <img [lazyLoad]='pic.ImageUrl' [defaultImage]='config?.DefaultImageUrl' [loadingImage]='config?.PrerenderImageUrl' />
                            <div class="desc" *ngIf='pic.Title'>{{pic.Title}}</div>
                        </div>
                    </div>
                </ng-container>
                <ng-template #deftpl>
                    <div class="swiper-slide">
                        <img [lazyLoad]='config?.DefaultImageUrl' [defaultImage]='config?.DefaultImageUrl' [loadingImage]='config?.PrerenderImageUrl' style="object-fit: cover;
            -o-object-fit: cover;
            max-height: 40vh;
            width: 100vw;
            height: 40vh;" /></div>
                </ng-template>
            </div>
        </div>
    </div>
    <ion-toolbar class="text-swiper">
        <ng-container *ngIf='isLoadingNotice else noticeTpl'>
            <ion-skeleton-text style="width: 100%;height: 1.5em;" animated></ion-skeleton-text>
        </ng-container>
        <ng-template #noticeTpl>
            <div class="blueBack" *ngIf="agentNotices?.length" (click)='goToBulletinList("agentNotice")'>
                <ion-slides class="announcement-container" [options]='swiperOption' (ionSlideTouchEnd)='onSlideTouchEnd()'>
                    <ion-slide *ngFor='let n of agentNotices'>
                        <div class='announcement'>
                            <ion-icon name="notifications-outline" color="secondary" style="font-size:18px;padding-right: 5px">
                            </ion-icon>
                            <div class="text ion-text-start">{{n.text}}</div>
                            <ion-icon name="chevron-forward-outline" style="font-size:18px"></ion-icon>
                        </div>
                    </ion-slide>
                </ion-slides>
            </div>
        </ng-template>
    </ion-toolbar>
    <div style='margin-top: -0.5em;'>
        <ion-list>
            <ion-grid class="products">
                <ion-row>
                    <ion-col size="4">
                        <div class="item" (click)='goToPage("flight")'>
                            <ion-label>
                                <!-- <i class="icon icon-home-plane"></i> -->
                                <img src="assets/svgs/home-plane2.svg" alt="国内机票">
                            </ion-label>
                            <ion-text notranslate>Domestic Flights</ion-text>
                        </div>
                    </ion-col>
                    <ion-col size="4" *ngIf='isShowoverseaFlight'>
                        <div class="item" (click)='goToPage("international-flight")'>
                            <ion-label>
                                <!-- <i class="icon icon-home-plane"></i> -->
                                <img src="assets/svgs/product-plane2.svg" alt="国际机票">
                            </ion-label>
                            <ion-text>Overseas Flights</ion-text>
                        </div>
                    </ion-col>
                    <ion-col (click)='goToPage("train")' size="4">
                        <div class="item">
                            <ion-label>
                                <img src="assets/svgs/home-train2.svg" alt="火车票">
                                <!-- <i class="icon icon-home-train"></i> -->
                            </ion-label>
                            <ion-text>Trains</ion-text>
                        </div>
                    </ion-col>
                    <ion-col (click)='goToPage("hotel")' size="4">
                        <div class="item">
                            <ion-label>
                                <img src="assets/svgs/hotel2.svg" alt="酒店" [style.height.em]='3'>
                                <!-- <i class="icon icon-hotel"></i> -->
                            </ion-label>
                            <ion-text>Domestic Hotels</ion-text>
                        </div>
                    </ion-col>
                    <ion-col (click)='goToPage("international-hotel")' size="4">
                        <div class="item">
                            <ion-label>
                                <img src="assets/svgs/product-hotel2.svg" alt="酒店" [style.height.em]='3'>
                                <!-- <i class="icon icon-hotel"></i> -->
                            </ion-label>
                            <ion-text>Overseas Hotels</ion-text>
                        </div>
                    </ion-col>
                    <ion-col (click)='goToPage("rentalCar")' size="4" *ngIf='isShowRentalCar&&(!identity?.Numbers?.AgentId)'>
                        <div class="item">
                            <ion-label>
                                <img src="assets/svgs/home-rentalCar2.svg" alt="用车" [style.height.em]='3'>
                                <!-- <i class="icon icon-hotel"></i> -->
                            </ion-label>
                            <ion-text color=''>Car</ion-text>
                        </div>
                    </ion-col>
                </ion-row>
            </ion-grid>
        </ion-list>
    </div>
</ion-content>