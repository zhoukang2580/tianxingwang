<ion-header>
  <ion-toolbar color="primary">
 
    <ion-title>登录</ion-title>

  </ion-toolbar>
</ion-header>

<ion-content padding>
  <form [formGroup]="form">
    <section *ngIf="loginType == 'user'">
      <ion-row>
        <ion-col size="4">
          <ion-label position="floating">用户名</ion-label>
        </ion-col>
        <ion-col>
          <ion-input type="text" formControlName="Name" placeholder="用户名"></ion-input>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col size="4">
          <ion-label position="floating">密码</ion-label>
        </ion-col>
        <ion-col>
          <ion-input type="password" placeholder="密码" formControlName="Password"></ion-input>
        </ion-col>
      </ion-row>
     
    </section>
    <section *ngIf="loginType == 'mobile'">
      <ion-row>
        <ion-col size="3">
          <ion-label position="floating">手机号</ion-label>
        </ion-col>
        <ion-col>
          <ion-input placeholder="手机号" formControlName="Mobile" type="number" min="11"></ion-input>
        </ion-col>
        <ion-col size="4" *ngIf="!countDown || countDown <= 0; else countdownEle">
          <ion-button size="small" fill="outline" color="primary" [disabled]="!isMobileNumberOk"
            (click)="showImageCode('sendmobilecode')">
            <span [style.font-size.rem]="0.8">发送验证码</span>
          </ion-button>
        </ion-col>
        <ng-template #countdownEle>
          <ion-col class="down-count" size="2">
            <ion-label color="medium">{{ countDown }} s</ion-label>
          </ion-col>
        </ng-template>
      </ion-row>

     
      <ion-row>
        <ion-col size="4">
          <ion-label position="floating">短信验证码</ion-label>
        </ion-col>
        <ion-col>
          <ion-input placeholder="请输入收到短信验证码" formControlName="MobileCode"></ion-input>
        </ion-col>
      </ion-row>
    </section>
    <!-- <ion-button expand='block' (click)='getWechatCode()'>获取微信登陆code</ion-button> -->
    <ion-button (click)="onLoginButton('login')" [disabled]="form.invalid || (loading$ | async) || !isLoginOk" expand="block" > 登录</ion-button>
    <ion-item lines='none'>
      <ion-note color="danger" *ngIf="message">{{ message }}</ion-note>
      <ion-button size="small" color="success" slot="end">
        <span *ngIf="loginType == 'user'" (click)="switchLoginType('mobile')">手机号登录</span>
        <span *ngIf="loginType != 'user'" (click)="switchLoginType('user')">用户名登录</span>
      </ion-button>
      <h6 text-end *ngIf="!validatedBySmsCode">
        <ion-note color="primary" (click)="forgetPassword()">忘记密码？</ion-note>
        <ion-note color="primary" (click)="register()">注册</ion-note>
      </h6>
    </ion-item>
    <app-slidvalidate-com  *ngIf="isShowImageCode" (slideEvent)='onSlideEvent($event)'></app-slidvalidate-com>
    <app-or-comp>第三方登陆</app-or-comp>
    <ion-item (click)='loginByWechat()' lines='none' text-center >
      <div class='third-party-logo'>
        <ion-thumbnail>
          <img src="assets/images/weixin-logo.png" alt="微信图标">
        </ion-thumbnail>
      </div>
    </ion-item>
  </form>
</ion-content>