<ion-content class='ion-padding' [scrollY]='false'>
  <ion-toolbar class='ion-text-center'>
    <img [lazyLoad]="config?.LogoImageUrl" alt="公司logo" class='logo' [defaultImage]='config?.PrerenderImageUrl||"assets/images/Logodm.png"' />
  </ion-toolbar>
  <form [formGroup]='form' class='ion-padding'>
    <ion-segment (ionChange)="segmentChanged($event)" value="user" color='secondary'>
      <ion-segment-button value="user">
        <ion-label>账号密码登录</ion-label>
      </ion-segment-button>
      <ion-segment-button value="mobile">
        <ion-label>手机快捷登录</ion-label>
      </ion-segment-button>
    </ion-segment>
    <ng-container *ngIf='loginType=="user" else mobilelogintemp'>
      <ion-list>
        <ion-item>
          <ion-label color='secondary'>
            <i class='icon icon-person'></i>
          </ion-label>
          <ion-input type='text' placeholder='请输入用户名/手机号' clear-input='true' required='true' formControlName="Name"></ion-input>
        </ion-item>
        <ion-item>
          <ion-label color='secondary'>
            <i class='icon icon-lock'></i>
          </ion-label>
          <ion-input [type]='eyeType' placeholder='请输入密码' clear-input='true' required='true' formControlName="Password"></ion-input>
          <ion-button (click)='onToggleEye()' fill='clear' color='secondary'>
            <ion-icon name='eye' *ngIf='eyeOn'></ion-icon>
            <ion-icon name='eye-off' *ngIf='!eyeOn'></ion-icon>
          </ion-button>
        </ion-item>
        <ion-item [style.height]='0'></ion-item>
      </ion-list>
    </ng-container>
    <ng-template #mobilelogintemp>
      <ion-list>
        <ion-item>
          <ion-label color='secondary'>
            <i class='icon icon-mobile'></i>
          </ion-label>
          <ion-input placeholder='请输入已绑定的手机号' clear-input='true' required='true' formControlName="Mobile" type="number" min="11"></ion-input>
        </ion-item>
        <ion-item>
          <ion-label color='secondary'>
            <i class='icon icon-verify'></i>
          </ion-label>
          <ion-input clear-input='true' required='true' type='text' placeholder='请输验证码' [maxlength]='6' formControlName="MobileCode"></ion-input>
          <ion-button slot='end' color='secondary' fill='outline' *ngIf='!countDown||countDown <= 0'
            (click)="showImageCode('sendmobilecode')">发送验证码</ion-button>
          <ion-button slot='end' fill='outline' [disabled]='true' color='medium' *ngIf='countDown'>{{countDown}} 秒后重发
          </ion-button>
        </ion-item>
        <ion-item [style.height]='0'></ion-item>
      </ion-list>
    </ng-template>
    <ion-item lines='none' *ngIf="message" class='err-msg'>
      <ion-label color="danger">{{ message }}</ion-label>
    </ion-item>
    <ion-button color='secondary' class='login-btn' expand='block' strong='true' (click)="onLoginButton('login')">
      <span *ngIf="!isLogining">登录</span>
      <span *ngIf="isLogining">正在登录...</span>
    </ion-button>
    <section class='register-forgetpassword'>
      <ion-button fill='clear' color='secondary' strong='true' (click)="forgetPassword()">忘记密码</ion-button>
      <!-- <span class='line'></span>
      <ion-button fill='clear' color='secondary' strong='true' (click)="register()">注册账号</ion-button> -->
    </section>
    <ng-container *ngIf="isShowWechatLogin">
      <app-or-comp>第三方登录</app-or-comp>
      <ion-item (click)='loginByWechat()' lines='none' class='ion-text-center'>
        <div class='third-party-logo'>
          <ion-thumbnail>
            <img src="assets/images/weixin-logo.png" alt="微信图标">
          </ion-thumbnail>
        </div>
      </ion-item>
    </ng-container>
  </form>
</ion-content>
<app-slidvalidate-com *ngIf="isShowImageCode" (slideEvent)='onSlideEvent($event)'></app-slidvalidate-com>
<!-- <div class='shade' *ngIf='isLogining'></div>
<div  *ngIf='isLogining' class='login-loading isloading'>正在登录,请稍后...</div> -->