<ion-header>
  <ion-toolbar>
    <ion-buttons slot='start'>
      <ion-button color='dark' (click)='back()'>
        <ion-icon name='arrow-back'></ion-icon>
      </ion-button>
    </ion-buttons>
    <app-date-city [checkInDate]='searchHotelModel?.checkInDate' *ngIf='!isShowSearchBar'
      [checkOutDate]='searchHotelModel?.checkOutDate' [city]='searchHotelModel?.destinationCity'
      (cityClick)='onCityClick()' (dateClick)='onDateClick()' (searchBarClick)='onSearchClick()'></app-date-city>
    <ion-searchbar [debounce]='700' [ngModel]='vmKeyowrds' [animated]='true' placeholder="" mode='ios'
      *ngIf='isShowSearchBar'>
    </ion-searchbar>
  </ion-toolbar>
  <ion-toolbar>
    <app-hotel-query (hotelQueryChange)='onHotelQueryChange($event)'></app-hotel-query>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-refresher slot='fixed' (ionRefresh)='doRefresh()'></ion-refresher>
  <ng-template #nosearchartempl>
    <ion-list>
      <ion-item *ngFor='let items of [1,2,3,4,5]' (click)='onSearchItemClick()'>
        搜索三生三世的
      </ion-item>
    </ion-list>
  </ng-template>
  <ng-template #listTemp>
    <ng-container *ngIf='!isShowSearchBar else nosearchartempl'>
      <ion-list *ngIf='hotelDayPrices?.length else noMoreData'>
        <ion-item *ngFor='let item of hotelDayPrices'>
          <ion-thumbnail slot='start'>
            <img [lazyloadImage]='item?.Hotel?.FileName' appLazyloadimage />
          </ion-thumbnail>
          <ion-label>
            <h3 class='name'>
              <ion-label>{{item?.Hotel?.Name}}</ion-label>
            </h3>
            <h5 class='grad-stars'>
              {{item?.Hotel?.Grade}}
              <div class='stars'>
                <ng-container *ngFor='let s of getStars(item.Hotel)'>
                  <ion-icon name="star" color='danger' *ngIf='s>=1'></ion-icon>
                  <ion-icon name='star-half' color='danger' *ngIf='s<1'></ion-icon>
                </ng-container>
              </div>
            </h5>
            <h6 class='address-price'>
              <ion-label>{{item?.Hotel?.Address}}</ion-label>
              <ion-text color='danger'>￥{{item?.Hotel?.VariablesJsonObj?.AvgPrice}}起</ion-text>
            </h6>
          </ion-label>
        </ion-item>
      </ion-list>
      <ng-template #noMoreData>
        <app-or-comp>暂无数据</app-or-comp>
      </ng-template>
    </ng-container>
  </ng-template>
  <ng-container #fakeList *ngIf='isLoading else listTemp'>
    <ion-list class='fakelist'>
      <ion-item *ngFor='let item of [1,2,3,4,5,6,7,8]'>
        <ion-thumbnail>
          <ion-skeleton-text style='height:3em;width:3em'></ion-skeleton-text>
        </ion-thumbnail>
        <ion-label>
          <h1>
            <ion-skeleton-text style="width:90%"></ion-skeleton-text>
          </h1>
          <h1>
            <ion-skeleton-text style="width:40%"></ion-skeleton-text>
          </h1>
          <h1 style="display:flex;justify-content:space-between;align-items: center;">
            <ion-skeleton-text style="width:70%"></ion-skeleton-text>
            <ion-skeleton-text style="width:10%"></ion-skeleton-text>
          </h1>
        </ion-label>
      </ion-item>
    </ion-list>
  </ng-container>
  <ion-infinite-scroll (ionInfinite)="loadMore()">
    <ion-infinite-scroll-content loadingSpinner="bubbles" loadingText="正在加载..."></ion-infinite-scroll-content>
  </ion-infinite-scroll>
</ion-content>