<div class='flight-info-item'>
  <ion-item-divider>
    <ion-button fill='clear' class='change-policy-btn' (click)='onToggleShowHide()' color='secondary'>
      {{tripDesc}}
      <ion-icon name="arrow-dropdown" size='small' mode='md' *ngIf='isShow'></ion-icon>
      <ion-icon name="arrow-dropright" size='small' mode='md' *ngIf='!isShow'></ion-icon>
    </ion-button>
  </ion-item-divider>
  <ion-grid [class.hide]='!isShow'>
    <ion-row>
      <ion-col>
        出票时间
      </ion-col>
      <ion-col>
        <span *ngIf='ticketIssueDateTime'>{{ticketIssueDateTime}}</span>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col>
        状态
      </ion-col>
      <ion-col text-nowrap>
        <ion-text color='danger'>
          {{ticket?.StatusName}}{{ticket?.VariablesJsonObj['IsScrap']?"【废票】":""}}{{
                (ticket?.Status==OrderFlightTicketStatusType.Exchanged)?(ticket?.FullTicketNo==ticket.OriginalTicketNo?"【同票号】":"【不同票号】"):""}}
        </ion-text>
        <ion-text *ngIf='ticket?.OriginalTicketNo' color='danger'>原票号{{ticket.OriginalTicketNo}}</ion-text>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col>航班信息</ion-col>
      <ion-col>{{trip?.TakeoffShortTime}}</ion-col>
      <ion-col style="justify-content: flex-end">
        <ion-button no-margin no-padding style='font-size: 0.7rem;' size='small' color='secondary' fill='clear'
          (click)='openRulesPopover(trip)'>
          退改签规定</ion-button>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col style="justify-content: flex-start">
        <span>{{trip?.CarrierName}}{{trip?.FlightNumber}}</span>
        <span *ngIf='trip?.CodeShareNumber'>(实际承运&nbsp;{{trip?.CarrierName}}{{trip?.CodeShareNumber}})</span>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col style='justify-content: flex-start;'>
        <span>{{trip?.CabinType|cabintype}}&nbsp;{{trip?.ShowCabinCode}}舱</span>
        <span *ngIf='trip?.Discount'>({{trip?.Discount|discount}})</span>
        <ng-container *ngIf='trip?.PlaneType'>
          <span>机型</span>
          <span>---</span>
          <span>{{trip?.PlaneType}}</span>
        </ng-container>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col>
        <div>
          <span>{{trip?.FromAirportName}}</span>
          <span *ngIf='trip?.FromTerminal'>({{trip?.FromTerminal}})</span>
        </div>
        <div class='is-stop'>
          <div *ngIf='trip?.IsStop'>------经停------</div>
          <div *ngIf='!trip?.IsStop'>------直飞------</div>
        </div>
        <div>
          <span>{{trip?.FromAirportName}}</span>
          <span *ngIf='trip?.ToTerminal'>({{trip?.ToTerminal}})</span>
        </div>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col>
        <div>{{takeOffDateTime}}</div>
        <div>{{trip?.FlyTime}}</div>
        <div>{{arrivalDateTime}}</div>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col>
        <div
          *ngIf='ticket?.Status==OrderFlightTicketStatusType.Issued||ticket?.Status==OrderFlightTicketStatusType.Booked'>
          机票费用：{{trip?.TicketPrice+trip?.Tax}}元。(其中机票款{{trip?.TicketPrice}}元，税收{{trip?.Tax}}元)</div>
        <div *ngIf='ticket?.StatusName?.includes("改签")'>改签费用：{{exchangeFee}}元</div>
        <div *ngIf='ticket?.Status==OrderFlightTicketStatusType.Refunded'>退票费用：{{refundDeductionFee}}元</div>
      </ion-col>
    </ion-row>
    <ng-container *ngIf='ticket?.FullTicketNo  as ticketNo'>
      <ion-row *ngIf='ticketNo!="-"'>
        <ion-col>
          <ion-text color='danger'>票号：{{ticketNo}}</ion-text>
        </ion-col>
      </ion-row>
    </ng-container>
  </ion-grid>
</div>